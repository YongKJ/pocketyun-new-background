(function(e){function t(t){for(var i,n,a=t[0],l=t[1],c=t[2],p=0,d=[];p<a.length;p++)n=a[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],i=!0,a=1;a<r.length;a++){var l=r[a];0!==s[l]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},s={app:0},o=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"04ec":function(e,t,r){e.exports=r.p+"img/error.c2ee5f69.gif"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-view")],1)},o=[],n={name:"App"},a=n,l=r("2877"),c=Object(l["a"])(a,s,o,!1,null,null,null),u=c.exports,p=r("8c4f"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"share"}},[i("vue-particles",{attrs:{color:"#ffffff",particleOpacity:.7,particlesNumber:50,shapeType:"circle",particleSize:3,linesColor:"#E6E6FA",linesWidth:1,lineLinked:!0,lineOpacity:.6,linesDistance:150,moveSpeed:6,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),i("el-row",{staticClass:"head"},[i("el-col",{attrs:{span:14}},[i("el-container",[i("el-main",{staticClass:"head-logo"},[i("span",{on:{click:function(t){return e.jumpUrl("http://cloud.yongkj.cn/")}}},[e._v("袖珍网盘吧")])])],1)],1),e.error?e._e():i("el-col",{attrs:{span:10}},[i("el-container",[i("el-main",{staticClass:"head-col"},[i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more el-icon--right",staticStyle:{color:"white"}})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.downloadTipsTwo,placement:"top-start"}},[i("el-dropdown-item",{attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.downloadMyFile()}}},[e._v("下载文件")])],1),i("el-dropdown-item",{attrs:{icon:"el-icon-link"},nativeOn:{click:function(t){return e.copyLink()}}},[e._v("复制链接")]),e.flag?e._e():i("el-dropdown-item",{attrs:{icon:"el-icon-document"},nativeOn:{click:function(t){return e.copyName()}}},[e._v("复制名称")])],1)],1)],1)],1)],1)],1),e.error?e._e():i("el-container",{staticClass:"userName-button"},[i("el-button",{staticStyle:{margin:"0 auto",position:"relative","z-index":"2"},attrs:{type:"text",disabled:""}},[e._v("共享者： "+e._s(e.userName))])],1),e.error||6===e.judgeFileType(e.filename)?e._e():i("el-row",{staticClass:"body",style:e.flag?"width:70%;":"width:326px;"},[i("el-container",{directives:[{name:"show",rawName:"v-show",value:3===e.judgeFileType(e.filename),expression:"judgeFileType(filename) === 3"}]},[i("d-player",{ref:"dplayer",staticClass:"video",attrs:{options:e.options}})],1),2===e.judgeFileType(e.filename)?i("el-container",[i("aplayer",{ref:"aplayer",staticStyle:{width:"100%"},attrs:{audio:e.audio,lrcType:0,mini:!1,listFolded:!0,autoplay:!1}})],1):4===e.judgeFileType(e.filename)?i("el-container",[i("el-image",{staticClass:"img-thumbnail",attrs:{src:e.resourceUrl},on:{click:function(t){return e.pictureDisplay()}}}),i("viewer",{attrs:{images:e.images},on:{inited:e.inited}},e._l(e.images,(function(e){return i("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.index,attrs:{src:e.src,height:"100"}})})),0)],1):5===e.judgeFileType(e.filename)?i("el-container",[i("mavon-editor",{ref:"md",style:e.isMD?"width: 100%;padding: 16px;":"width: 100%;",attrs:{codeStyle:e.codeStyle,ishljs:!0},domProps:{innerHTML:e._s(e.text)}})],1):e._e()],1),6===e.judgeFileType(e.filename)?i("el-container",{staticClass:"document"},[i("el-image",{staticClass:"img-thumbnail",staticStyle:{margin:"0 auto",position:"relative","z-index":"3"},attrs:{src:"http://m.yongkj.cn/document.svg"},on:{click:function(t){return e.pictureDisplay()}}})],1):e._e(),e.error?e._e():i("el-container",{staticClass:"download-button"},[e.flag?i("el-button",{staticStyle:{margin:"0 auto",position:"relative","z-index":"2"},attrs:{round:"",type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadMyFile()}}},[e._v(e._s(e.downloadTipsTwo))]):i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.downloadTipsTwo,placement:"bottom"}},[i("el-button",{staticStyle:{margin:"0 auto",position:"relative","z-index":"2"},attrs:{round:"",type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadMyFile()}}},[e._v(e._s(e.downloadTips))])],1)],1),e.error?i("el-row",{staticClass:"body",style:e.flag?"width:70%;":"width:326px;"},[i("el-image",{staticClass:"img-thumbnail",staticStyle:{margin:"0 auto",position:"relative","z-index":"3",width:"100%"},attrs:{src:r("04ec")},on:{click:function(t){return e.pictureDisplay()}}})],1):e._e()],1)},f=[],h=(r("c975"),r("fb6a"),r("ac1f"),r("466d"),r("5319"),r("1276"),{name:"share",data:function(){return{baseHost:"cloud.yongkj.cn",fileHost:"file.yongkj.cn",filename:"",size:"",path:"",userName:"",userUUID:"",shareUrl:"",downloadUrl:"",resourceUrl:"",downloadTips:"",downloadTipsTwo:"",test:"",flag:!0,options:{video:{url:""}},audio:[],images:[],text:"",codeStyle:"vs2015",error:!1,first:!0,isMD:!1}},mounted:function(){this.isMobile()&&(this.flag=!1),this.judgeFilePathUUID()},updated:function(){var e=this;2==this.judgeFileType(this.filename)&&this.$refs.aplayer.currentMusic.url!=this.resourceUrl&&(this.$refs.aplayer.switch(0),clearTimeout(this.timer),this.timer=setTimeout((function(){e.$refs.aplayer.seek(0),e.$refs.aplayer.pause()}),500))},methods:{isMobile:function(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return e},getUrlKey:function(){var e=window.location.href;if(-1!=e.indexOf("?")){for(var t=e.split("#")[0],r=t.split("?")[1],i=r.split("&"),s={},o=0;o<i.length;o++)s[i[o].split("=")[0]]=i[o].split("=")[1];return s.f}return""},judgeFilePathUUID:function(){var e=this,t=this.getUrlKey();"undefined"==typeof t?(this.error=!0,this.$message({message:"无法获取共享文件！请检查文件共享链接是否正确！",type:"error"})):""==t?(this.error=!0,this.$message({message:"无法获取共享文件！错误的文件共享链接！",type:"error"})):this.$axios.post("http://"+this.baseHost+"/pathsController/getFileInfo",this.$qs.stringify({pathsUUID:t})).then((function(r){if(""==r.data.message)if(e.userUUID=r.data.userDto.userUUID,e.userName=r.data.userDto.userName,e.filename=r.data.pathsDto.filename,e.size=r.data.pathsDto.size,e.path=r.data.pathsDto.path,e.shareUrl="http://"+e.baseHost+"/share.html?f="+t,e.downloadUrl="http://"+e.baseHost+"/pathsController/download?pathsUUID="+t,e.resourceUrl=encodeURIComponent("http://"+e.fileHost+"/fileSystem/"+e.userName+e.path),e.resourceUrl=e.resourceUrl.replace(/%3A/g,":"),e.resourceUrl=e.resourceUrl.replace(/%2F/g,"/"),e.downloadTips="下载 "+e.getNameString(e.filename,23)+" ("+e.size.slice(0,e.size.length-2)+" "+e.size.slice(e.size.length-2,e.size.length)+")",e.downloadTipsTwo="下载 "+e.filename+" ("+e.size.slice(0,e.size.length-2)+" "+e.size.slice(e.size.length-2,e.size.length)+")",3==e.judgeFileType(e.filename)&&""!=e.resourceUrl)e.$refs.dplayer.dp.switchVideo({url:e.resourceUrl});else if(2==e.judgeFileType(e.filename)&&""!=e.resourceUrl){var i=[],s="http://m.yongkj.cn/audio_default.png";if(-1!=e.filename.indexOf("-")){var o=e.filename.split("-"),n=o[0],a=o[1].split("."),l=a[0];i.push({name:l,artist:n,url:e.resourceUrl,cover:s,lrc:""})}else a=e.filename.split("."),l=a[0],n="群星",i.push({name:l,artist:n,url:e.resourceUrl,cover:s,lrc:""});e.audio=[],e.audio=i}else if(4==e.judgeFileType(e.filename)&&""!=e.resourceUrl){var c=[];c.push({src:e.resourceUrl,index:0}),e.images=c}else 5==e.judgeFileType(e.filename)&&""!=e.resourceUrl&&e.getText();else e.error=!0,e.$message({message:"共享文件获取失败！"+r.data.message,type:"error"})})).catch((function(e){console.log(e),this.$message({message:"共享文件获取失败！请检查网络！",type:"error"})}))},getNameString:function(e,t){for(var r=0,i="",s=0;s<e.length;s++)if(e.charCodeAt(s)>128?r+=2:r++,i+=e.charAt(s),r>=t)return i+"...";return i},downloadMyFile:function(){var e=this,t=document.createElement("a");t.download=this.filename,t.href=this.downloadUrl,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),clearTimeout(this.timer),this.timer=setTimeout((function(){e.$message({type:"success",message:"文件即将开始下载！"})}),500)},test1:function(){var e=this;this.$alert("baseHost："+this.baseHost+"\nflag:"+this.flag+"\nvideoWidth:"+this.videoWidth+"\nvideoHeight:"+this.videoHeight+"\nisMobile:"+this.isMobile()+"\nfilePathUUID:"+this.getUrlKey(),"信息",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"action: ".concat(t)})}})},copyLink:function(){var e=this;this.$copyText(this.shareUrl).then((function(t){e.test=t.text,e.$message({type:"success",message:"分享链接复制成功！"})}),(function(t){console.log(t),e.$message({type:"error",message:"分享链接复制失败！"})}))},copyName:function(){var e=this;this.$copyText(this.filename).then((function(t){e.test=t.text,e.$message({type:"success",message:"文件名称复制成功！"})}),(function(t){console.log(t),e.$message({type:"error",message:"文件名称复制失败！"})}))},judgeFileType:function(e){if(""==e)return 7;if(-1!=e.indexOf("/"))return 1;if(-1!=e.toLowerCase().indexOf(".mp3"))return 2;if(-1!=e.toLowerCase().toLowerCase().indexOf(".wav"))return 2;if(-1!=e.toLowerCase().indexOf(".flac"))return 2;if(-1!=e.toLowerCase().indexOf(".mp4"))return 3;if(-1!=e.toLowerCase().indexOf(".webm"))return 3;if(-1!=e.toLowerCase().indexOf(".mkv"))return 3;if(-1!=e.toLowerCase().indexOf(".jpg"))return 4;if(-1!=e.toLowerCase().indexOf(".png"))return 4;if(-1!=e.toLowerCase().indexOf(".jpeg"))return 4;for(var t=[".cpp",".css",".c",".groovy",".go",".html",".java",".json",".jsp",".js",".lua",".makefile",".md",".txt",".properties",".perl",".php",".ps1",".pyc",".py",".rb",".sh",".sql",".ts",".xml",".vb",".yaml"],r=0;r<t.length;r++)if(-1!=e.toLowerCase().indexOf(t[r]))return 5;return 6},inited:function(e){this.$viewer=e},pictureDisplay:function(){this.$viewer.show()},getText:function(){var e=this;this.$axios.post("http://"+this.baseHost+"/pathsController/getText",this.$qs.stringify({userUUID:this.userUUID,pathsUUID:this.getUrlKey()})).then((function(t){e.text=e.getMarkdownText(t.data.textContent)})).catch((function(t){console.log(t),e.$message({type:"error",message:"获取文件内容失败！服务器内部错误！"})}))},getMarkdownText:function(e){for(var t=[".cpp",".css",".c",".groovy",".go",".html",".java",".json",".jsp",".js",".lua",".makefile",".md",".txt",".properties",".perl",".php",".ps1",".pyc",".py",".rb",".sh",".sql",".ts",".xml",".vb",".yaml"],r=["c++","css","c","groovy","golang","html","java","json","jsp","javascript","lua","makefile","markdown","plain_text","properties","perl","php","powershell","python","python","ruby","sh","sql","typescript","xml","vbscript","yaml"],i=0;i<t.length;i++)if(-1!=this.filename.indexOf(t[i]))return"markdown"==r[i]?(this.isMD=!0,this.$refs.md.markdownIt.render(e)):this.$refs.md.markdownIt.render("```"+r[i]+"\n"+e+"\n```");return e},jumpUrl:function(e){window.open(e,"top")},onPlay:function(){var e=this;this.first&&this.$refs.aplayer.currentMusic.url!=this.resourceUrl&&(this.first=!1,this.$refs.aplayer.switch(0),clearTimeout(this.timer),this.timer=setTimeout((function(){e.$refs.aplayer.seek(0),e.$refs.aplayer.pause()}),500))},imgAdd:function(e,t){console.log(e),console.log(t)}}}),m=h,g=(r("e5c6"),Object(l["a"])(m,d,f,!1,null,null,null)),y=g.exports;i["default"].use(p["a"]);var w=new p["a"]({mode:"hash",base:"",routes:[{path:"/",redirect:{name:"share"}},{path:"/share",name:"share",component:y,meta:{title:"文件共享"}}]}),v=(r("840a"),r("bc3a")),b=r.n(v),x=r("4328"),U=r.n(x),j=r("4eb5"),T=r.n(j),k=r("98c9"),C=r("5f5b"),$=(r("f9e3"),r("2dd8"),r("5c96")),O=r.n($),_=(r("0fae"),r("71ee")),D=r.n(_),M=(r("4da9"),r("cf0d")),F=r.n(M),S=r("b2d8"),z=r.n(S),I=(r("64e1"),r("6944")),P=r.n(I);r("0808");w.beforeEach((function(e,t,r){"/"==e.path?r():"/share"==e.path?(document.title=e.meta.title,r()):r({path:"/"})})),i["default"].prototype.$axios=b.a,i["default"].prototype.$qs=U.a,i["default"].use(T.a),i["default"].use(k["a"]),i["default"].use(C["a"]),i["default"].use(O.a),i["default"].use(D.a),i["default"].use(F.a,{defaultCover:"https://github.com/u3u.png",productionTip:!1}),i["default"].use(z.a),i["default"].use(P.a),P.a.setDefaults({Options:{inline:!0,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,url:"data-source"}}),i["default"].config.productionTip=!1,new i["default"]({router:w,render:function(e){return e(u)}}).$mount("#app")},c9ae:function(e,t,r){},e5c6:function(e,t,r){"use strict";r("c9ae")}});